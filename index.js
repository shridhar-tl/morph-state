!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom/client"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom/client","react-dom"],t):"object"==typeof exports?exports["morph-state"]=t(require("react"),require("react-dom/client"),require("react-dom")):e["morph-state"]=t(e.React,e.ReactDOM.client,e.ReactDOM)}(this,((e,t,n)=>(()=>{"use strict";var r={962:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(601),a=n.n(r),o=n(314),c=n.n(o)()(a());c.push([e.id,"body{margin:0;font-family:Arial,sans-serif}.example-viewer{width:100%;height:100vh;display:flex;flex-direction:column}.example-viewer h1{text-align:center;padding:20px;background:#4caf50;color:#fff;margin:0}.content{display:flex;height:calc(100% - 80px)}.sidebar{width:30%;background:#f4f4f4;border-right:1px solid #ddd;padding:20px;box-sizing:border-box}.sidebar ul{list-style:none;padding:0;margin:0}.sidebar li{padding:10px 20px;cursor:pointer;transition:background .3s ease}.sidebar li:hover{background:#e0e0e0}.sidebar li.active{background:#4caf50;color:#fff}.playground{width:70%;padding:20px;box-sizing:border-box;overflow-y:auto}.playground-container{width:100%;height:100%}",""]);const i=c},995:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(601),a=n.n(r),o=n(314),c=n.n(o)()(a());c.push([e.id,".item-container{width:100%;border:1px solid #ccc;padding:16px;box-sizing:border-box;background-color:#f9f9f9}.item-title{font-size:1.5em;font-weight:bold;margin-bottom:16px;text-align:center;color:#333}.item-content{display:flex;align-items:center;justify-content:space-between}.item-code{flex:0 0 48%;padding:16px;background:#fff;box-shadow:0 0 8px rgba(0,0,0,.1);overflow:auto;white-space:pre-wrap;word-wrap:break-word}.item-divider{width:4%;height:100%;background-color:#ccc;margin:0 1%}.item-component{flex:0 0 48%;display:flex;justify-content:center;align-items:center;padding:16px}",""]);const i=c},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,a,o){"string"==typeof e&&(e=[[null,e,void 0]]);var c={};if(r)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(c[s]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);r&&c[u[0]]||(void 0!==o&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=o),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),a&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=a):u[4]="".concat(a)),t.push(u))}},t}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var o={},c=[],i=0;i<e.length;i++){var s=e[i],l=r.base?s[0]+r.base:s[0],u=o[l]||0,p="".concat(l," ").concat(u);o[l]=u+1;var f=n(p),d={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==f)t[f].references++,t[f].updater(d);else{var m=a(d,r);r.byIndex=i,t.splice(i,0,{identifier:p,updater:m,references:1})}c.push(p)}return c}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var o=r(e=e||[],a=a||{});return function(e){e=e||[];for(var c=0;c<o.length;c++){var i=n(o[c]);t[i].references--}for(var s=r(e,a),l=0;l<o.length;l++){var u=n(o[l]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}o=s}}},659:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},12:t=>{t.exports=e},33:e=>{e.exports=n},138:e=>{e.exports=t}},a={};function o(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={id:e,exports:{}};return r[e](n,n.exports,o),n.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.nc=void 0;var c=o(12),i=o.n(c),s=o(138),l=o(33);let u=e=>e();function p(e){const t=new WeakMap;return function e(n){if(null==n)return n;if("object"!=typeof n&&"function"!=typeof n)return n;if(n instanceof Date)return new Date(n.getTime());if(n instanceof RegExp)return new RegExp(n);if(Array.isArray(n)){const r=[];t.set(n,r);for(const a of n)r.push(t.get(a)??e(a));return r}if(n instanceof Set){const r=new Set;t.set(n,r);for(const a of n)r.add(t.get(a)??e(a));return r}if(n instanceof Map){const r=new Map;t.set(n,r);for(const[a,o]of n)r.set(e(a),t.get(o)??e(o));return r}if("object"==typeof n){if(t.has(n))return t.get(n);const r=Array.isArray(n)?[]:Object.create(Object.getPrototypeOf(n));t.set(n,r);for(const a of Reflect.ownKeys(n)){const o=a;r[o]=t.get(n[o])??e(n[o])}return r}return n}(e)}function f(e,t,n){return m(e,t)===n?e:d(e,t,n)}function d(e,t,n){if(0===t.length)return n;const[r,...a]=t;if((e=null===e||"object"!=typeof e?{}:Array.isArray(e)?[...e]:e instanceof Map?new Map(e):{...e})instanceof Map)if(0===a.length&&void 0===n)e.delete(r);else{const t=d(e.get(r),a,n);e.set(r,t)}else 0===a.length&&void 0===n?delete e[r]:e[r]=d(e[r],a,n);return e}function m(e,t){let n=e;for(let e=0;e<t.length;e++){const r=t[e];if(null==n)return;if(n instanceof Map)n=n.get(r);else{if("object"!=typeof n||!(r in n))return;n=n[r]}}return n}function g(e){let t,n={};if("function"==typeof e)t=e;else if(e&&"object"==typeof e){const{onChange:r,...a}=e;"function"==typeof r&&(t=r),n=a}else"boolean"==typeof e&&(n={interceptArrays:e,interceptNull:e,interceptObjects:e,interceptSpecialObjects:e,interceptUndefined:e,interceptValues:e});return{changeHandler:t,config:n}}"undefined"!=typeof window&&window.document&&(u=l.unstable_batchedUpdates);const h="";function v(e,t){const{changeHandler:n,config:r}=g(t),a=()=>e?p(e):{},o={current:a()},c=new Map,i=new Set;let s=null;const l=e=>{i.add(e),s||(s=setTimeout((()=>{s=null,u((()=>{const e=Array.from(c.keys()),t=new Set;i.forEach((n=>{e.filter((e=>e===n||n.startsWith(`${e}.`))).forEach((e=>t.add(e)))})),i.clear(),t.add(h);const n=new Set;t.forEach((e=>{const t=c.get(e);t&&t.forEach((e=>n.add(e)))})),n.forEach((e=>e()))}))}),0))};function d(e,t){t&&"string"==typeof t||(t=h),c.has(t)||c.set(t,new Set);const n=c.get(t);return n.add(e),()=>n.delete(e)}function v(e,t="",r=n){let a=e,o=!1;return r&&r(e,{field:t,cancel:()=>{o=!0},update:e=>{a=e}}),{modifiedValue:a,cancelUpdate:o}}const b={toJSON:()=>p(o.current),replace:e=>{o.current=e,l(h)},reset:()=>b.replace(a()),subscribe:d,withConfig:x,__ms__ref:"s7jebsld"};function x(e){const{interceptUndefined:t,interceptNull:r,interceptObjects:a,interceptArrays:c,interceptSpecialObjects:i,interceptValues:s}=e,u=new Map;function h(e,t=n,r){const{modifiedValue:a,cancelUpdate:c}=t?.(r)??{modifiedValue:r};if(!c){const t=f(o.current,e,a);if(t!==o.current){const n=e.join(".");!function(e,t){const n=`${t}.`;e.forEach(((r,a)=>{(a===t||a.startsWith(n)||t.startsWith(`${a}.`))&&e.delete(a)}))}(u,n),o.current=t,l(n)}}}return new Proxy({...b,withConfig:t=>{const{config:n}=g(t);return x({...e,...n})}},function e(n,l=v){return{get(l,f,g){if("symbol"==typeof f)return Reflect.get(l,f,g);if("__ms_prx"===f)return!0;if(Object.hasOwn(l,f))return l[f];if("$value"===f)return p(o.current);const b=m(n?l.$value:o.current,[f]),x=typeof b;if("undefined"===x){if(!0!==t)return b}else if(null===b){if(!0!==r)return b}else if(Array.isArray(b)){if(!1===c)return b}else if(b instanceof Map||b instanceof Set){if(!1===i)return b}else if("object"!==x||b instanceof Date||b instanceof String){if(!0!==s)return b}else if(!1===a)return b;return function(t){const n=t.every((e=>"string"==typeof e))?t.join("."):"";let r=u.get(n);if(r)return r;const a={$value:m(o.current,t),$remove:()=>h(t,(e=>v(e,n))),$eventHandler:e=>r=>h(t,(t=>v(t,n,e)),r.target.value),$changeHandler:e=>h(t,(e=>v(e,n)),e),$subscribe:e=>d(e,n)};return function(e){const t=e.$value;t&&t instanceof Set?(e.add=n=>{const r=new Set(t);return r.add(n),e.$changeHandler(r),r},e.delete=n=>{const r=new Set(t);return r.delete(n),e.$changeHandler(r),r},e.clear=()=>{const t=new Set;return e.$changeHandler(t),t}):Array.isArray(t)&&(e.push=n=>{const r=[...t,n];return e.$changeHandler(r),r})}(a),r=new Proxy(a,e(t,v)),n&&u.set(n,r),r}(n?[...n,f]:[f])},set:(e,t,r)=>(h(n?[...n,t]:[t],l,r),!0)}}())}return x(r)}function b(e){return e?.__ms_prx?e.$value:e}function x(e,t){return e?.withConfig?.(t)}const y=(0,c.createContext)(null);function E({initialState:e,onChange:t,config:n,children:r}){const a=(0,c.useRef)();if(!a.current){let r;const o=null!=n;if(o&&t){const{config:e}=g(n);r={...e,onChange:t}}else o?r=n:t&&(r=t);a.current=v(e||{},r)}return i().createElement(y.Provider,{value:a.current},r)}function S(e,t){const n=(0,c.useContext)(y);if(!n)throw new Error("useMorphState must be used within a MorphStateProvider");("function"!=typeof e&&void 0!==e||null!==e&&null==t)&&(t=e,e=void 0);const r=i().useMemo((()=>null==t?n:x(n,t)),[n,t]),[a,o]=i().useState((()=>e?e(r):r));return i().useEffect((()=>{const t=e;return t?n.subscribe((()=>{const e=t(r);o(e)})):n.subscribe((()=>o({})))}),[r,e]),e?a:r}const w=[{name:"Simple useMutableState",code:'\nimport React from "react";\nimport { useMutableState } from "morph-state";\n\nconst ComponentExample = () => {\n    const state = useMutableState({ name: "John", age: 25 });\n\n    return (\n        <div>\n            <h3>Component State Example</h3>\n            <input\n                type="text"\n                value={state.name}\n                onChange={e => state.name = e.target.value}\n            />\n            <p>{state.name}</p>\n            <p>{state.age}</p>\n        </div>\n    );\n};\n\nexport default ComponentExample;\n        ',component:()=>{const e=function(){const e=(0,c.useRef)(),[,t]=(0,c.useState)({});return e.current||(e.current=v({name:"John",age:25}||{},void 0)),(0,c.useEffect)((()=>e.current.subscribe((()=>t({})))),[]),e.current}();return i().createElement("div",null,i().createElement("h3",null,"Component State Example"),i().createElement("input",{type:"text",value:e.name,onChange:t=>e.name=t.target.value}),i().createElement("p",null,e.name),i().createElement("p",null,e.age))}},{name:"Simple createStore",code:'\nimport React from "react";\nimport { createStore, createHook } from "morph-state";\n\nconst store = createStore({ name: "Jane", age: 30 });\nconst useGlobalState = createHook(store);\n\nconst GlobalStoreExample = () => {\n    const state = useGlobalState();\n    const age = useGlobalState(s => s.age);\n\n    return (\n        <div>\n            <h3>Global Store Example</h3>\n            <input\n                type="text"\n                value={state.name}\n                onChange={e => state.name = e.target.value}\n            />\n            <p>Name: {state.name}</p>\n            <p>Age: {age}</p>\n        </div>\n    );\n};\n\nexport default GlobalStoreExample;\n        ',component:()=>{const e=i().useMemo((()=>function(){const e=v({name:"Jane",age:30}||{},void 0);return{state:e,subscribe:e.subscribe}}()),[]),t=i().useMemo((()=>function(e){return(t,n)=>{void 0===n&&"object"==typeof t&&(n=t,t=void 0);const r=i().useMemo((()=>n?x(e,n):e.state),[n]),{rootState:a,state:o}=i().useMemo((()=>{const e=r;return{rootState:e,state:t?t(e):e}}),[t,r]),c=i().useRef({rootState:a,state:o}),[,s]=i().useState(o);return i().useEffect((()=>e.state.subscribe((()=>{const e=r;if(t){const n=t(e);n!==c.current.state&&(c.current.state=n,s({}))}else c.current.state=e,s({});c.current.rootState=e}))),[e.state,t]),c.current.state}}(e)),[e]),n=t(),r=t((e=>e.age));return i().createElement("div",null,i().createElement("h3",null,"Global Store Example"),i().createElement("input",{type:"text",value:n.name,onChange:e=>n.name=e.target.value}),i().createElement("p",null,"Name: ",n.name),i().createElement("p",null,"Age: ",r))}},{name:"Simple MorphStateProvider",code:'\nimport React from "react";\nimport { MorphStateProvider, useMorphState } from "morph-state";\n\nconst initialState = {\n    name: "Doe",\n    age: 20\n};\n\nconst ContextExample = () => {\n    const state = useMorphState();\n    const age = useMorphState(s => s.age);\n\n    return (\n        <div>\n            <h3>Context Example</h3>\n            <input\n                type="text"\n                value={valueOf(state.name)}\n                onChange={e => state.name = e.target.value}\n            />\n            <p>{state.name}</p>\n            <p>{age}</p>\n        </div>\n    );\n};\n\nconst App = () => (\n    <MorphStateProvider initialState={initialState}>\n        <ContextExample />\n    </MorphStateProvider>\n);\n\nexport default App;\n        ',component:()=>i().createElement(E,{initialState:{name:"Doe",age:20}},i().createElement((()=>{const e=S(),t=S((e=>e.age));return i().createElement("div",null,i().createElement("h3",null,"Context Example"),i().createElement("input",{type:"text",value:b(e.name),onChange:t=>e.name=t.target.value}),i().createElement("p",null,e.name),i().createElement("p",null,t))}),null))}];var M=o(72),A=o.n(M),C=o(825),j=o.n(C),N=o(659),O=o.n(N),k=o(56),R=o.n(k),$=o(540),P=o.n($),T=o(113),_=o.n(T),H=o(995),D={};D.styleTagTransform=_(),D.setAttributes=R(),D.insert=O().bind(null,"head"),D.domAPI=j(),D.insertStyleElement=P(),A()(H.A,D),H.A&&H.A.locals&&H.A.locals;const I=function({example:e}){return i().createElement("div",{className:"item-container"},i().createElement("div",{className:"item-title"},e.name),i().createElement("div",{className:"item-content"},i().createElement("div",{className:"item-code"},e.code),i().createElement("div",{className:"item-divider"}),i().createElement("div",{className:"item-component"},i().createElement(e.component,null))))};var q=o(962),G={};G.styleTagTransform=_(),G.setAttributes=R(),G.insert=O().bind(null,"head"),G.domAPI=j(),G.insertStyleElement=P(),A()(q.A,G),q.A&&q.A.locals&&q.A.locals;const U=document.getElementById("root");return(0,s.createRoot)(U).render(i().createElement((function({examples:e}){const[t,n]=(0,c.useState)(e[0]);return i().createElement("div",{className:"example-viewer"},i().createElement("h1",null,"Live Examples Viewer"),i().createElement("div",{className:"content"},i().createElement("div",{className:"sidebar"},i().createElement("ul",null,e.map((e=>i().createElement("li",{key:e.name,className:t===e?"active":"",onClick:()=>n(e)},e.name))))),i().createElement("div",{className:"playground"},i().createElement("div",{className:"playground-container"},i().createElement(I,{example:t})))))}),{examples:w})),{}})()));